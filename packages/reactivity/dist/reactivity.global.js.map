{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../src/baseHandlers.ts", "../src/reactive.ts"],
  "sourcesContent": ["export * from './reactive'", "export const isObject = (value) => {\n  return typeof value === 'object' && value !== null;\n}\n", "import { isObject } from '../../shared/src/index';\nimport { reactive, ReactiveFlags } from './reactive';\nconst get = createGetter();\nconst set = createSetter();\n\nexport const mutableHandlers: ProxyHandler<object> = {\n  get,\n  set,\n  // deleteProperty,\n  // has,\n  // ownKeys\n};\n\nfunction createGetter() {\n  return function get(target, key) {\n    if (key === ReactiveFlags.IS_REACTIVE) { // \u662F\u5426\u88AB\u4EE3\u7406\u7684\u6807\u8BC6\u3002\n      return true;\n    }\n    const res = Reflect.get(target, key)\n    // \u6536\u96C6\u4F9D\u8D56 \u521B\u5EFAdep -> effects\u4E2D\u63D2\u5165 -> effect\n    // track(target, key)\n\n    // \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u4E5F\u8F6C\u4E3A\u4EE3\u7406\n    if (isObject(res)) {\n      return reactive(res)\n    }\n    return res\n  }\n}\nfunction createSetter() {\n  return function set(target, key, value) {\n    const result = Reflect.set(target, key, value)\n    // \u89E6\u53D1\u4F9D\u8D56 \u627E\u5230dep -> \u904D\u5386effects -> \u6267\u884C\u6BCF\u4E00\u4E2Aeffect\n    // trigger(target, key, value)\n    return result\n  }\n}\n", "import { isObject } from \"@vue/shared\";\nimport { mutableHandlers } from \"./baseHandlers\";\n\nexport const enum ReactiveFlags {\n  // \u662F\u5426\u662Freactive\u7684\u6807\u8BC6\u3002\u901A\u8FC7\u5176\u6765\u5224\u65AD\u662F\u5426\u88ABproxy\u4EE3\u7406\u8FC7\u3002\u5426\u5219\u9700\u8981\u6539\u5199[Symbol.toStringTag]\u503C\u624D\u65B9\u4FBF\u5224\u65AD\u3002\n  // \u6CA1\u6709\u8D4B\u503C\u64CD\u4F5C\uFF0C\u662F\u5728\u4EE3\u7406\u7684get\u51FD\u6570\u4E2D\u5224\u65AD\u7684\u3002\n  IS_REACTIVE = \"__v_isReactive\",\n}\n\nexport interface Target {\n  [ReactiveFlags.IS_REACTIVE]: boolean;\n}\n\nconst reactiveMap = new WeakMap<Target, any>();\n\n// export function reactive<T extends object>(target: T): ProxyConstructor;\nexport function reactive(target) {\n  return createReactive(target, mutableHandlers, reactiveMap);\n}\n\nfunction createReactive(\n  target: any,\n  baseHandlers: ProxyHandler<any>,\n  proxyMap\n) {\n  // \u5982\u679C\u4E0D\u662F\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FD4\u56DE\n  if (!isObject(target)) {\n    return target;\n  }\n\n  // \u5DF2\u5728Map\u4E2D\u7F13\u5B58\u7684\u76F4\u63A5\u4F7F\u7528\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n\n  // \u4F7F\u7528proxy\u4EE3\u7406\n  const proxy = new Proxy(target, baseHandlers);\n  // \u5B58\u50A8\u5230Map\u4E2D\n  proxyMap.set(target, proxy);\n\n  return proxy;\n}\n\nexport function isReactive(value): boolean {\n  // \u8F6C\u4E3A\u5E03\u5C14\u503C\n  return !!(value && value[ReactiveFlags.IS_REACTIVE])\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,MAAM,WAAW,CAAC,UAAU;AACjC,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAChD;;;ACAA,MAAM,MAAM,aAAa;AACzB,MAAM,MAAM,aAAa;AAElB,MAAM,kBAAwC;AAAA,IACnD;AAAA,IACA;AAAA,EAIF;AAEA,0BAAwB;AACtB,WAAO,cAAa,QAAQ,KAAK;AAC/B,UAAI,QAAQ,oCAA2B;AACrC,eAAO;AAAA,MACT;AACA,YAAM,MAAM,QAAQ,IAAI,QAAQ,GAAG;AAKnC,UAAI,SAAS,GAAG,GAAG;AACjB,eAAO,SAAS,GAAG;AAAA,MACrB;AACA,aAAO;AAAA,IACT;AAAA,EACF;AACA,0BAAwB;AACtB,WAAO,cAAa,QAAQ,KAAK,OAAO;AACtC,YAAM,SAAS,QAAQ,IAAI,QAAQ,KAAK,KAAK;AAG7C,aAAO;AAAA,IACT;AAAA,EACF;;;ACjCO,MAAW,gBAAX,kBAAW,mBAAX;AAGL,oCAAc;AAHE;AAAA;AAUlB,MAAM,cAAc,oBAAI,QAAqB;AAGtC,oBAAkB,QAAQ;AAC/B,WAAO,eAAe,QAAQ,iBAAiB,WAAW;AAAA,EAC5D;AAEA,0BACE,QACA,cACA,UACA;AAEA,QAAI,CAAC,SAAS,MAAM,GAAG;AACrB,aAAO;AAAA,IACT;AAGA,UAAM,gBAAgB,SAAS,IAAI,MAAM;AACzC,QAAI,eAAe;AACjB,aAAO;AAAA,IACT;AAGA,UAAM,QAAQ,IAAI,MAAM,QAAQ,YAAY;AAE5C,aAAS,IAAI,QAAQ,KAAK;AAE1B,WAAO;AAAA,EACT;AAEO,sBAAoB,OAAgB;AAEzC,WAAO,CAAC,CAAE,UAAS,MAAM;AAAA,EAC3B;",
  "names": []
}
